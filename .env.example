# 管理员令牌（请务必更改此值以确保安全性）
ADMIN_TOKEN=Lpp3wNhB3SlgMlxE

# 自动迁移控制（生产环境默认开启）
# 设置为 false 可禁用自动迁移
AUTO_MIGRATE=true

# 数据库连接字符串（仅用于本地开发或非 Docker Compose 部署）
DSN="postgres://user:password@host:port/db_name"

# 数据库配置（Docker Compose 部署时使用）
DB_USER=postgres
DB_PASSWORD=your-secure-password_change-me
DB_NAME=claude_code_hub

# 应用配置
APP_PORT=23000
APP_URL=                                   # 应用访问地址（留空自动检测，生产环境建议显式配置）
                                           # 示例：https://your-domain.com 或 http://192.168.1.100:23000

# Cookie 安全策略
# 功能说明：控制是否强制 HTTPS Cookie（设置 cookie 的 secure 属性）
# - true (默认)：仅允许 HTTPS 传输 Cookie，浏览器会自动放行 localhost 的 HTTP
# - false：允许 HTTP 传输 Cookie（会降低安全性，仅推荐用于内网部署）
# 警告：若设置为 true 且使用远程 HTTP 访问，浏览器将拒绝设置 Cookie 导致无法登录
ENABLE_SECURE_COOKIES=true

# Redis 配置（用于限流和 Session 追踪）
# 功能说明：
# - 限流功能：金额限制（5小时/周/月）+ Session 并发限制
# - Session 追踪：5 分钟上下文缓存优化（避免频繁切换供应商）
# - Fail Open 策略：Redis 不可用时自动降级，不影响服务可用性
ENABLE_RATE_LIMIT=true                  # 是否启用限流功能（默认：true）
REDIS_URL=redis://localhost:6379        # Redis 连接地址（Docker 部署使用 redis://redis:6379）

# Session 配置
SESSION_TTL=300                         # Session 过期时间（秒，默认 300 = 5 分钟）
STORE_SESSION_MESSAGES=false            # 是否存储请求 messages 到 Redis（用于实时监控页面查看详情，默认：false）
                                        # 警告：启用后会增加 Redis 内存使用，且可能包含敏感信息

# 熔断器配置
# 功能说明：控制网络错误是否计入熔断器失败计数
# - false (默认)：网络错误（DNS 解析失败、连接超时、代理连接失败等）不计入熔断器，仅供应商错误（4xx/5xx HTTP 响应）计入
# - true：所有错误（包括网络错误）都计入熔断器失败计数
# 使用场景：
# - 默认关闭：适用于网络不稳定环境（如使用代理），避免因临时网络抖动触发熔断器
# - 启用：适用于网络稳定环境，连续网络错误也应触发熔断保护，避免持续请求不可达的供应商
ENABLE_CIRCUIT_BREAKER_ON_NETWORK_ERRORS=false

# 多提供商类型支持（实验性功能）
# - false (默认)：仅支持 Claude、Codex类型供应商
# - true：支持 Gemini CLI、OpenAI Compatible 等其他类型
# 警告：其他类型功能仍在开发中，暂不建议启用
ENABLE_MULTI_PROVIDER_TYPES=false

# Codex Instructions 注入（实验性功能）
# 功能说明：控制是否强制替换 Codex 请求中的 instructions 字段为官方完整 prompt
# - false (默认)：保持原样透传，不修改 instructions（推荐）
# - true：强制替换为官方 Codex CLI instructions（约 4000+ 字完整 prompt）
# 使用场景：
# - 默认关闭：适用于官方 Codex CLI 客户端（已包含完整 instructions）和大多数场景
# - 启用：某些 Codex 供应商可能要求必须包含官方 instructions，如遇代理失败可尝试启用
# 注意：即使关闭此选项，仍会删除 Codex 不支持的参数（temperature, max_tokens 等）
ENABLE_CODEX_INSTRUCTIONS_INJECTION=false

# 客户端版本检查配置
# 功能说明：控制客户端版本检查和 GA 版本检测的行为
# - GA 版本定义：当某个版本有至少 N 个用户使用时，该版本被视为 GA（General Availability）版本
# - 版本检查：在管理后台启用后，旧版本客户端会被拦截并提示升级
# 注意：版本检查功能默认关闭，需要在管理后台【设置 → 客户端版本】中手动启用
CLIENT_VERSION_GA_THRESHOLD=2           # GA 版本检测阈值（用户数，默认：2）
